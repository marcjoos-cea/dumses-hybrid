This is DUMSES - hybrid version

Copyrights 2013-2021, CEA, Marc Joos<marc.joos@cea.fr>, Sébastien Fromang, Patrick Hennebelle, Romain Teyssier
This software is distributed under the CeCILL-A & GNU/GPL licences (see <http://www.cecill.info/licences/Licence_CeCILL_V2.1-en.html> and <http://www.gnu.org/licenses/>)

Main Contributors to the code:
 - Code architecture      : Marc Joos, Sébastien Fromang, Patrick Hennebelle, Romain Teyssier
 - MPI parallelization    : Sébastien Fromang, Patrick Hennebelle, Romain Teyssier
 - OpenMP parallelization : Marc Joos
 - OpenACC parallelization: Marc Joos, Damien Merret, Laëtitia Anton, Clément Fontenaille, Rémy Dubois
 - MHD                    : Sébastien Fromang, Patrick Hennebelle, Romain Teyssier
 - Parallel I/O           : Marc Joos, Pierre Kestener

DUMSES is a 3D MPI/OpenMP & MPI/OpenACC Eulerian second-order Godunov (magneto)hydrodynamic simulation code in cartesian, spherical and cylindrical coordinates.


1. CONFIGURATION/COMPILATION

To configure and compile the code, please execute:
  ./configure 

with the following optional flags:
 -h, --help				   print the help
 -m, --with-mpi=<MPIDIR> 		   to specify MPI library directory
 -H, --with-phdf5=<HDFDIR> 		   to specify Parallel HDF5 library directory
 -c, --with-pnetcdf=<CDFDIR> 		   to specify Parallel NetCDF library directory
 -f, --with-fortran-compiler=<FCCMPILER>   to specify which Fortran compiler to use. If not set and not on BlueGene, Fortran compiler is retrieve from 'mpif90' executable
 -p, --problem=<PROBLEM> 	  	   to specify which problem to initialize. Default: magnetic_loop.
 -n, --ndim=<NDIM> 	 	     	   to specify the number of dimensions of the problem. Default: 3
 -i, --iso[thermal]=<ISO> 		   to specify if the computation is isothermal or not. Default: 1 (isothermal)
 
Note that this configure script should automatically detect if you are on a BlueGene machine.

This configuration script will automatically generate a Makefile for your architecture.
To compile the code, you have to launch the make.py script. This script will preprocess the code with a Python preprocessor. In particular, it will generate the Riemann solvers.

2. RUNNING THE CODE

Problems can be found in src/problem/. Please select a problem with the -p option of the configure script, and then copy the input file in your execution directory to run the code.


3. ANALYZING THE RESULTS

In utils/dumpy/ you will find a small Python package to read DUMSES data.


4. TESTING THE CODE

A test suite can be run in utils/test/ by the test.py script. You just have to run

python test.py

It can take several minutes to run. It produces a PDF file in utils/test/fig/ summarizing the results and comparing them to a reference test suite execution.


5. DOCUMENTATION

Documentation of the code can be generated by running:
 doxygen doc/Doxyfile

You can then access it with your favorite browser:
 $browser doc/html/index.html

User manual can be generated by running:
 pdflatex doc/manual/manual.tex
or, if you have minted installed:
 pdflatex -shell-escape doc/manual/manual.tex
